<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Result Portal | CBSN-U</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
    margin:0;
    font-family:'Roboto',sans-serif;
    background:linear-gradient(to right,#141e30,#243b55);
    color:#fff;
}

header{
    padding:15px 5%;
    background:rgba(0,0,0,.75);
    display:flex;
    justify-content:space-between;
    align-items:center;
}

header h2{margin:0;}

.container{
    max-width:460px;
    margin:80px auto;
    background:rgba(255,255,255,.1);
    padding:40px;
    border-radius:18px;
    backdrop-filter:blur(18px);
    box-shadow:0 20px 45px rgba(0,0,0,.6);
}

.container h1{
    text-align:center;
    margin-bottom:30px;
    font-weight:400;
}

label{
    display:block;
    margin:18px 0 8px;
}

input{
    width:100%;
    padding:13px;
    border:none;
    border-radius:7px;
    font-size:15px;
}

button{
    width:100%;
    margin-top:28px;
    padding:15px;
    background:#f39c12;
    border:none;
    border-radius:7px;
    font-size:16px;
    font-weight:700;
    cursor:pointer;
}

button:hover{background:#ffb703;}

#resultBox{
    margin-top:28px;
    text-align:center;
}

.download-btn{
    margin-top:18px;
    padding:13px 22px;
    background:#27ae60;
    color:#fff;
    border:none;
    border-radius:6px;
    font-size:15px;
    cursor:pointer;
}

.error{
    color:#ff7675;
    margin-top:15px;
}
</style>
</head>

<body>

<header>
    <h2>CBSN-U</h2>
    <a href="javascript:history.back()" style="color:#fff;text-decoration:none;">
        <i class="fas fa-arrow-left"></i> Back
    </a>
</header>

<div class="container">
    <h1>Result Portal</h1>

    <label>Roll Number / Application ID</label>
    <input type="text" id="roll" placeholder="Enter Roll Number">

    <label>Date of Birth</label>
    <input type="date" id="dob">

    <button onclick="fetchResult()">
        <i class="fas fa-search"></i> Search Result
    </button>

    <div id="resultBox"></div>
</div>

<script>
const RESULT_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxyYS5D3xj_647oym1MVvGaB2nEzHgVsQAhSQgXwhoGNIXN2y4gw6Eazt_DxThdfV0cEA/exec";

function fetchResult(){
    const roll = document.getElementById("roll").value.trim();
    const dob  = document.getElementById("dob").value;

    if(!roll || !dob){
        alert("Please enter Roll Number and Date of Birth");
        return;
    }

    document.getElementById("resultBox").innerHTML = "Checking result...";

    fetch(`${RESULT_SCRIPT_URL}?roll=${encodeURIComponent(roll)}&dob=${encodeURIComponent(dob)}`)
    .then(res => res.json())
    .then(data => {
        if(data.status === "success"){
            document.getElementById("resultBox").innerHTML = `
                <p>Result available for <b>${data.name}</b></p>
                <a href="${data.link}" target="_blank">
                    <button class="download-btn">
                        <i class="fas fa-download"></i> Download Result
                    </button>
                </a>
            `;
        }else{
            document.getElementById("resultBox").innerHTML =
            `<p class="error">Invalid Roll Number or Date of Birth</p>`;
        }
    })
    .catch(()=>{
        document.getElementById("resultBox").innerHTML =
        `<p class="error">Server error. Try again later.</p>`;
    });
}
</script>

</body>
</html>

