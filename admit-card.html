<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admit Card Download | CBSN-U</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
    margin:0;
    font-family:'Roboto',sans-serif;
    background:#0f2027;
    background:linear-gradient(to right,#2c5364,#203a43,#0f2027);
    color:#fff;
}

header{
    padding:15px 5%;
    background:rgba(0,0,0,.7);
    display:flex;
    justify-content:space-between;
    align-items:center;
}

header h2{margin:0;}

.container{
    max-width:450px;
    margin:60px auto;
    background:rgba(255,255,255,.1);
    padding:35px;
    border-radius:15px;
    backdrop-filter:blur(15px);
    box-shadow:0 15px 40px rgba(0,0,0,.6);
}

.container h1{
    text-align:center;
    margin-bottom:25px;
    font-weight:400;
}

label{
    display:block;
    margin:15px 0 8px;
}

input{
    width:100%;
    padding:12px;
    border:none;
    border-radius:6px;
    font-size:15px;
}

button{
    width:100%;
    margin-top:25px;
    padding:14px;
    background:#f39c12;
    border:none;
    border-radius:6px;
    font-size:16px;
    font-weight:700;
    cursor:pointer;
}

button:hover{background:#ffb400;}

#result{
    margin-top:25px;
    text-align:center;
}

.download-btn{
    margin-top:15px;
    padding:12px 20px;
    background:#27ae60;
    color:#fff;
    border:none;
    border-radius:5px;
    font-size:15px;
    cursor:pointer;
}

.error{
    color:#ff7675;
    margin-top:15px;
}
</style>
</head>

<body>

<header>
    <h2>CBSN-U</h2>
    <a href="javascript:history.back()" style="color:#fff;text-decoration:none;">
        <i class="fas fa-arrow-left"></i> Back
    </a>
</header>

<div class="container">
    <h1>Admit Card Portal</h1>

    <label>Roll Number / Application ID</label>
    <input type="text" id="roll" placeholder="Enter Roll Number">

    <label>Date of Birth</label>
    <input type="date" id="dob">

    <button onclick="fetchAdmitCard()">
        <i class="fas fa-search"></i> Search Admit Card
    </button>

    <div id="result"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbytFOwIo3lUztp-ajULfk9Gg3y7idU49vrKat-CA5hh3eKDHPR_LMHH9JLmRTJ5S0XU/exec";

function fetchAdmitCard(){
    const roll = document.getElementById("roll").value.trim();
    const dob  = document.getElementById("dob").value;

    if(!roll || !dob){
        alert("Please enter Roll No and Date of Birth");
        return;
    }

    document.getElementById("result").innerHTML = "Checking details...";

    fetch(`${SCRIPT_URL}?roll=${roll}&dob=${dob}`)
    .then(res => res.json())
    .then(data => {
        if(data.status === "success"){
            document.getElementById("result").innerHTML = `
                <p>Welcome <b>${data.name}</b></p>
                <a href="${data.link}" target="_blank">
                    <button class="download-btn">
                        <i class="fas fa-download"></i> Download Admit Card
                    </button>
                </a>
            `;
        }else{
            document.getElementById("result").innerHTML =
            `<p class="error">Invalid Roll Number or Date of Birth</p>`;
        }
    })
    .catch(()=>{
        document.getElementById("result").innerHTML =
        `<p class="error">Server error. Try again later.</p>`;
    });
}
</script>

</body>
</html>
